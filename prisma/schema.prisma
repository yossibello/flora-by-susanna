generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Customer {
  id         String   @id @default(cuid())
  email      String   @unique
  name       String
  phone      String?
  address    String?
  city       String?
  postalCode String?
  country    String   @default("Sweden")
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  orders     Order[]
  reviews    Review[]
}

model Flower {
  id           String      @id @default(cuid())
  name         String
  description  String
  price        Float
  category     String
  imageUrl     String?
  availability Boolean     @default(true)
  stockCount   Int         @default(0)
  createdAt    DateTime    @default(now())
  updatedAt    DateTime    @updatedAt
  orderItems   OrderItem[]
  reviews      Review[]
}

model Order {
  id              String      @id @default(cuid())
  customerId      String
  orderDate       DateTime    @default(now())
  deliveryDate    DateTime?
  deliveryAddress String
  deliveryCity    String
  deliveryPostal  String
  status          String      @default("pending")
  totalAmount     Float
  notes           String?
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  customer        Customer    @relation(fields: [customerId], references: [id])
  orderItems      OrderItem[]
}

model OrderItem {
  id        String   @id @default(cuid())
  orderId   String
  flowerId  String
  quantity  Int
  price     Float
  createdAt DateTime @default(now())
  flower    Flower   @relation(fields: [flowerId], references: [id])
  order     Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
}

model Review {
  id         String   @id @default(cuid())
  customerId String
  flowerId   String?
  rating     Int
  comment    String?
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  customer   Customer @relation(fields: [customerId], references: [id])
  flower     Flower?  @relation(fields: [flowerId], references: [id])
}

model Inquiry {
  id               String   @id @default(cuid())
  name             String
  email            String
  phone            String?
  inquiryType      String
  preferredDate    String?
  budget           String?
  colors           String?
  style            String?
  deliveryMethod   String?
  deliveryAddress  String?
  message          String
  weddingDate      String?
  venue            String?
  guestCount       String?
  funeralDate      String?
  funeralType      String?
  consultation     String?
  companyName      String?
  contactPerson    String?
  serviceType      String?
  deliveryInterval String?
  status           String   @default("new")
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
}
